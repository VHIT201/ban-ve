{"openapi":"3.0.0","info":{"title":"Architectural Blueprint API","version":"1.0.0","description":"Hệ thống quản lý và chia sẻ bản vẽ kiến trúc"},"servers":[{"url":"http://localhost:3000","description":"Local server"},{"url":"https://architectural-bluepr-backend.onrender.com","description":"Production server"}],"tags":[{"name":"Files","description":"API quản lý file"},{"name":"Categories","description":"Quản lý danh mục bản vẽ"},{"name":"Content","description":"Quản lý nội dung"},{"name":"Auth","description":"Xác thực người dùng"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","properties":{"_id":{"type":"string","description":"ID của người dùng"},"username":{"type":"string","description":"Tên đăng nhập"},"email":{"type":"string","format":"email","description":"Email người dùng"},"role":{"type":"string","enum":["user","admin"],"description":"Vai trò người dùng","default":"user"},"createdAt":{"type":"string","format":"date-time","description":"Thời gian tạo tài khoản"},"updatedAt":{"type":"string","format":"date-time","description":"Thời gian cập nhật cuối cùng"}}},"LoginInput":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","example":"yourpassword123"}}},"RegisterInput":{"type":"object","required":["username","email","password"],"properties":{"username":{"type":"string","example":"johndoe","minLength":3},"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","minLength":6,"example":"yourpassword123"}}},"AuthResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string","description":"JWT token for authentication"}}},"Category":{"type":"object","description":"Danh mục bản vẽ","required":["name","slug"],"properties":{"_id":{"type":"string","description":"ID của danh mục"},"name":{"type":"string","description":"Tên danh mục (phải là duy nhất)","maxLength":100},"slug":{"type":"string","description":"URL-friendly name của danh mục (tự động tạo từ name)"},"description":{"type":"string","description":"Mô tả chi tiết về danh mục","maxLength":500},"createdAt":{"type":"string","format":"date-time","description":"Thời gian tạo danh mục"},"updatedAt":{"type":"string","format":"date-time","description":"Thời gian cập nhật danh mục"}}},"File":{"type":"object","properties":{"_id":{"type":"string","description":"ID của file"},"name":{"type":"string","description":"Tên file"},"url":{"type":"string","description":"Đường dẫn đến file"},"type":{"type":"string","enum":["3D","PDF","PNG","JPG","JPEG","DWG","SKP","RVT","IFC","OTHER"],"description":"Loại file"},"size":{"type":"number","description":"Kích thước file (bytes)"},"createdAt":{"type":"string","format":"date-time","description":"Thời gian tạo"},"updatedAt":{"type":"string","format":"date-time","description":"Thời gian cập nhật"}}},"Stats":{"type":"object","description":"Thống kê tổng quan hệ thống","properties":{"_id":{"type":"string","description":"ID của bản ghi thống kê"},"totalContents":{"type":"integer","description":"Tổng số nội dung"},"totalUsers":{"type":"integer","description":"Tổng số người dùng"},"totalTransactions":{"type":"integer","description":"Tổng số giao dịch"},"totalReports":{"type":"integer","description":"Tổng số báo cáo"},"pendingContents":{"type":"integer","description":"Số nội dung chờ duyệt"},"approvedContents":{"type":"integer","description":"Số nội dung đã duyệt"},"rejectedContents":{"type":"integer","description":"Số nội dung bị từ chối"},"lastUpdated":{"type":"string","format":"date-time","description":"Thời gian cập nhật cuối cùng"}}},"Content":{"type":"object","properties":{"_id":{"type":"string","description":"ID của nội dung"},"title":{"type":"string","description":"Tiêu đề nội dung"},"description":{"type":"string","description":"Mô tả chi tiết"},"field":{"type":"string","description":"Lĩnh vực"},"file_type":{"type":"string","description":"Loại file"},"file_url":{"type":"string","description":"Đường dẫn file"},"status":{"type":"string","enum":["pending","approved","rejected"],"description":"Trạng thái duyệt"},"createdAt":{"type":"string","format":"date-time","description":"Thời gian tạo"},"updatedAt":{"type":"string","format":"date-time","description":"Thời gian cập nhật"},"createdBy":{"$ref":"#/components/schemas/User"},"approvedBy":{"$ref":"#/components/schemas/User"},"approvedAt":{"type":"string","format":"date-time"},"rejectionReason":{"type":"string"}}},"ContentInput":{"type":"object","required":["title","field","file_type","file_url"],"properties":{"title":{"type":"string","description":"Tiêu đề bắt buộc"},"description":{"type":"string","description":"Mô tả (không bắt buộc)"},"field":{"type":"string","description":"Lĩnh vực của nội dung"},"file_type":{"type":"string","description":"Loại file (image, video, document, ...)"},"file_url":{"type":"string","description":"Đường dẫn đến file"}}},"Comment":{"type":"object","properties":{"_id":{"type":"string"},"contentId":{"type":"string"},"userId":{"$ref":"#/components/schemas/User"},"guestName":{"type":"string"},"email":{"type":"string"},"content":{"type":"string"},"isGuest":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"CreateCommentInput":{"type":"object","required":["contentId","content"],"properties":{"contentId":{"type":"string","description":"ID của nội dung"},"content":{"type":"string","description":"Nội dung bình luận"},"guestName":{"type":"string","description":"Tên người dùng (bắt buộc nếu là khách)"},"email":{"type":"string","format":"email","description":"Email người dùng (bắt buộc nếu là khách)"}}},"UpdateCommentInput":{"type":"object","required":["content"],"properties":{"content":{"type":"string","description":"Nội dung bình luận mới"}}},"CopyrightReport":{"type":"object","properties":{"_id":{"type":"string"},"reporterId":{"$ref":"#/components/schemas/User"},"contentId":{"type":"object","properties":{"_id":{"type":"string"},"title":{"type":"string"}}},"reportedContentId":{"type":"object","properties":{"_id":{"type":"string"},"title":{"type":"string"}}},"violationType":{"type":"string","enum":["copyright","trademark","privacy","other"]},"description":{"type":"string"},"status":{"type":"string","enum":["pending","reviewing","resolved","rejected"]},"evidence":{"type":"array","items":{"type":"string"}},"adminNotes":{"type":"string"},"resolvedAt":{"type":"string","format":"date-time"},"resolvedBy":{"$ref":"#/components/schemas/User"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"CreateReportInput":{"type":"object","required":["contentId","violationType","description","evidence"],"properties":{"contentId":{"type":"string","description":"ID của nội dung bị báo cáo"},"reportedContentId":{"type":"string","description":"ID của nội dung gốc (nếu có)"},"violationType":{"type":"string","enum":["copyright","trademark","privacy","other"],"description":"Loại vi phạm"},"description":{"type":"string","description":"Mô tả chi tiết"},"evidence":{"type":"array","items":{"type":"string"},"description":"Danh sách URL bằng chứng"}}},"UpdateReportStatusInput":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["pending","reviewing","resolved","rejected"]},"adminNotes":{"type":"string"}}},"Payment":{"type":"object","properties":{"_id":{"type":"string"},"userId":{"type":"string"},"contentId":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"status":{"type":"string","enum":["pending","completed","failed","cancelled"]},"paymentMethod":{"type":"string","enum":["momo","bank_transfer","credit_card","qr_code"]},"transactionId":{"type":"string"},"paymentDetails":{"type":"object"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"CreatePaymentInput":{"type":"object","required":["contentId","amount","paymentMethod"],"properties":{"contentId":{"type":"string","description":"ID của nội dung cần thanh toán"},"amount":{"type":"number","description":"Số tiền thanh toán"},"paymentMethod":{"type":"string","enum":["momo","bank_transfer","credit_card","qr_code"],"description":"Phương thức thanh toán"},"cardDetails":{"type":"object","description":"Thông tin thẻ (chỉ cần khi chọn phương thức credit_card)"}}},"Resource":{"type":"object","properties":{"_id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"category":{"type":"string","enum":["design","document","3d_model","cad","image","video","archive"]},"fileExtensions":{"type":"array","items":{"type":"string"}},"software":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"downloadUrl":{"type":"string"},"isFree":{"type":"boolean"},"os":{"type":"array","items":{"type":"string","enum":["windows","mac","linux","web"]}},"imageUrl":{"type":"string"}}}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"CreateResourceInput":{"type":"object","required":["name","description","category","fileExtensions","software"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"category":{"type":"string","enum":["design","document","3d_model","cad","image","video","archive"]},"fileExtensions":{"type":"array","items":{"type":"string"}},"software":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"downloadUrl":{"type":"string"},"isFree":{"type":"boolean"},"os":{"type":"array","items":{"type":"string","enum":["windows","mac","linux","web"]}},"imageUrl":{"type":"string"}}}}}},"SocialInteraction":{"type":"object","properties":{"_id":{"type":"string"},"contentId":{"type":"string"},"userId":{"type":"string"},"type":{"type":"string","enum":["view","share"]},"platform":{"type":"string","description":"Nền tảng chia sẻ (facebook, twitter, etc.)"},"userAgent":{"type":"string"},"ipAddress":{"type":"string"},"metadata":{"type":"object"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"ContentStats":{"type":"object","properties":{"_id":{"type":"string"},"contentId":{"type":"string"},"viewCount":{"type":"number"},"shareCount":{"type":"number"},"lastUpdated":{"type":"string","format":"date-time"}}},"PopularContent":{"type":"object","properties":{"contentId":{"type":"string"},"title":{"type":"string"},"viewCount":{"type":"number"},"shareCount":{"type":"number"},"popularityScore":{"type":"number"},"lastUpdated":{"type":"string","format":"date-time"}}}}},"paths":{"/api/admin/stats":{"get":{"tags":["Admin"],"summary":"Lấy thống kê tổng quan","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"$ref":"#/components/schemas/Stats"}}}}}}}}},"/api/admin/contents/pending":{"get":{"tags":["Admin"],"summary":"Lấy danh sách nội dung chờ duyệt","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Số trang"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Số lượng mỗi trang"}],"responses":{"200":{"description":"Thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Content"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}}}}},"/api/admin/contents/{contentId}/review":{"put":{"tags":["Admin"],"summary":"Duyệt hoặc từ chối nội dung","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"contentId","required":true,"schema":{"type":"string"},"description":"ID của nội dung"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected"],"description":"Trạng thái duyệt"},"reason":{"type":"string","description":"Lý do từ chối (nếu có)"}}}}}},"responses":{"200":{"description":"Thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Content"}}}}}}}}},"/api/categories":{"post":{"summary":"Tạo mới danh mục","tags":["Categories"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string","description":"Tên danh mục (phải là duy nhất)"},"description":{"type":"string","description":"Mô tả chi tiết về danh mục"}}}}}},"responses":{"201":{"description":"Danh mục đã được tạo thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Category"}}}},"400":{"description":"Lỗi validate dữ liệu hoặc tên danh mục đã tồn tại"}}},"get":{"summary":"Lấy danh sách tất cả danh mục","tags":["Categories"],"responses":{"200":{"description":"Danh sách các danh mục","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Category"}}}}}}}},"/api/categories/{id}":{"get":{"summary":"Lấy thông tin chi tiết một danh mục","tags":["Categories"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của danh mục"}],"responses":{"200":{"description":"Thông tin chi tiết danh mục","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Category"}}}},"404":{"description":"Không tìm thấy danh mục"}}},"put":{"summary":"Cập nhật thông tin danh mục","tags":["Categories"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của danh mục cần cập nhật"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Tên mới của danh mục"},"description":{"type":"string","description":"Mô tả mới của danh mục"}}}}}},"responses":{"200":{"description":"Danh mục đã được cập nhật","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Category"}}}},"400":{"description":"Lỗi validate dữ liệu hoặc tên danh mục đã tồn tại"},"404":{"description":"Không tìm thấy danh mục"}}},"delete":{"summary":"Xóa một danh mục","tags":["Categories"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của danh mục cần xóa"}],"responses":{"200":{"description":"Đã xóa danh mục thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Đã xóa danh mục thành công"}}}}}},"404":{"description":"Không tìm thấy danh mục"}}}},"/api/contents/{contentId}/comments":{"post":{"tags":["Comments"],"summary":"Tạo bình luận mới","description":"Cho phép người dùng đăng nhập hoặc khách để lại bình luận","security":[],"parameters":[{"in":"path","name":"contentId","required":true,"schema":{"type":"string"},"description":"ID của nội dung cần bình luận"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["content"],"properties":{"content":{"type":"string","description":"Nội dung bình luận"},"guestName":{"type":"string","description":"Tên người dùng (bắt buộc nếu là khách)"},"email":{"type":"string","format":"email","description":"Email (bắt buộc nếu là khách)"}}}}}},"responses":{"201":{"description":"Bình luận đã được tạo thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"400":{"description":"Dữ liệu không hợp lệ"}}},"get":{"tags":["Comments"],"summary":"Lấy danh sách bình luận của một nội dung","parameters":[{"in":"path","name":"contentId","required":true,"schema":{"type":"string"},"description":"ID của nội dung"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Số trang hiện tại"},{"in":"query","name":"limit","schema":{"type":"integer","default":10,"maximum":50},"description":"Số lượng bản ghi mỗi trang"}],"responses":{"200":{"description":"Danh sách bình luận","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Comment"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"},"currentPage":{"type":"integer"},"itemsPerPage":{"type":"integer"},"hasNext":{"type":"boolean"},"hasPrev":{"type":"boolean"}}},"message":{"type":"string"}}}}}}}}},"/api/comments":{"post":{"tags":["Comments"],"summary":"Tạo bình luận mới","description":"Cho phép người dùng đăng nhập hoặc khách để lại bình luận","security":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentInput"}}}},"responses":{"201":{"description":"Bình luận đã được tạo thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Comment"}}}}}}}}},"/api/comments/{id}":{"put":{"tags":["Comments"],"summary":"Cập nhật bình luận","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của bình luận"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCommentInput"}}}},"responses":{"200":{"description":"Cập nhật bình luận thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Comment"}}}}}}}},"delete":{"tags":["Comments"],"summary":"Xóa bình luận","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của bình luận"}],"responses":{"200":{"description":"Xóa bình luận thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":null}}}}}}}}},"/api/content":{"get":{"summary":"Lấy danh sách nội dung đã được duyệt","tags":["Content"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Trang hiện tại"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Số lượng bản ghi mỗi trang"},{"in":"query","name":"field","schema":{"type":"string"},"description":"Lọc theo lĩnh vực"},{"in":"query","name":"file_type","schema":{"type":"string"},"description":"Lọc theo loại file"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Tìm kiếm theo tiêu đề hoặc mô tả"}],"responses":{"200":{"description":"Danh sách nội dung","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Content"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"totalPages":{"type":"integer"},"currentPage":{"type":"integer"},"itemsPerPage":{"type":"integer"},"hasNext":{"type":"boolean"},"hasPrev":{"type":"boolean"}}}}}}}}}}},"/api/content/{id}":{"get":{"summary":"Lấy chi tiết một nội dung","tags":["Content"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của nội dung"}],"responses":{"200":{"description":"Chi tiết nội dung","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Content"}}}},"400":{"description":"ID không hợp lệ"},"404":{"description":"Không tìm thấy nội dung"}}},"delete":{"summary":"Xóa nội dung","tags":["Content"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của nội dung cần xóa"}],"responses":{"200":{"description":"Đã xóa nội dung thành công"},"400":{"description":"ID không hợp lệ"},"401":{"description":"Chưa đăng nhập"},"404":{"description":"Không tìm thấy nội dung"}}}},"/api/content/upload":{"post":{"summary":"Tải lên nội dung mới","tags":["Content"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentInput"}}}},"responses":{"201":{"description":"Đã tạo nội dung thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Content"}}}},"401":{"description":"Chưa đăng nhập"}}}},"/api/content/{id}/approve":{"put":{"summary":"Duyệt nội dung (chỉ admin)","tags":["Content"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của nội dung cần duyệt"}],"responses":{"200":{"description":"Đã duyệt nội dung thành công"},"400":{"description":"ID không hợp lệ"},"401":{"description":"Chưa đăng nhập hoặc không có quyền"},"404":{"description":"Không tìm thấy nội dung"}}}},"/api/reports":{"post":{"tags":["Copyright"],"summary":"Gửi báo cáo vi phạm bản quyền","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReportInput"}}}},"responses":{"201":{"description":"Gửi báo cáo thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CopyrightReport"}}}}}}}},"get":{"tags":["Copyright"],"summary":"Lấy danh sách báo cáo (Admin)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["pending","reviewing","resolved","rejected"]},"description":"Lọc theo trạng thái"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Số trang hiện tại"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Số lượng bản ghi mỗi trang"}],"responses":{"200":{"description":"Danh sách báo cáo","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/CopyrightReport"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}}}}},"/api/reports/{reportId}":{"get":{"tags":["Copyright"],"summary":"Lấy chi tiết báo cáo","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"reportId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Chi tiết báo cáo","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"$ref":"#/components/schemas/CopyrightReport"}}}}}}}}},"/api/reports/{reportId}/status":{"put":{"tags":["Copyright"],"summary":"Cập nhật trạng thái báo cáo (Admin)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"reportId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateReportStatusInput"}}}},"responses":{"200":{"description":"Cập nhật trạng thái thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CopyrightReport"}}}}}}}}},"/api/file":{"post":{"tags":["Files"],"summary":"Tạo mới file","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/File"}}}},"responses":{"201":{"description":"Tạo file thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/File"}}}}}},"get":{"tags":["Files"],"summary":"Lấy danh sách tất cả file","responses":{"200":{"description":"Danh sách file","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/File"}}}}}}}},"/api/file/{id}":{"get":{"tags":["Files"],"summary":"Lấy thông tin chi tiết file","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của file"}],"responses":{"200":{"description":"Thông tin chi tiết file","content":{"application/json":{"schema":{"$ref":"#/components/schemas/File"}}}},"404":{"description":"Không tìm thấy file"}}},"delete":{"tags":["Files"],"summary":"Xóa file","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID của file cần xóa"}],"responses":{"200":{"description":"Đã xóa file thành công","content":{"application/json":{"schema":{"$ref":"#/components/schemas/File"}}}},"404":{"description":"Không tìm thấy file để xóa"}}}},"/api/payments":{"post":{"tags":["Payments"],"summary":"Tạo yêu cầu thanh toán mới","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentInput"}}}},"responses":{"201":{"description":"Tạo yêu cầu thanh toán thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Payment"}}}}}}}}},"/api/payments/{paymentId}":{"get":{"tags":["Payments"],"summary":"Lấy thông tin chi tiết thanh toán","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"paymentId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Thông tin thanh toán","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"$ref":"#/components/schemas/Payment"}}}}}}}}},"/api/payments/history":{"get":{"tags":["Payments"],"summary":"Lấy lịch sử thanh toán của người dùng","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Số trang hiện tại"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Số lượng bản ghi mỗi trang"}],"responses":{"200":{"description":"Danh sách lịch sử thanh toán","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Payment"}},"pagination":{"type":"object","properties":{"total":{"type":"integer"},"page":{"type":"integer"},"limit":{"type":"integer"},"totalPages":{"type":"integer"}}}}}}}}}}},"/api/resources":{"get":{"tags":["Resources"],"summary":"Lấy danh sách tất cả tài nguyên phần mềm","responses":{"200":{"description":"Danh sách tài nguyên","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Resource"}}}}}}}}},"post":{"tags":["Resources"],"summary":"Thêm mới tài nguyên phần mềm (Admin)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateResourceInput"}}}},"responses":{"201":{"description":"Đã thêm tài nguyên mới","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Resource"}}}}}}}}},"/api/resources/suggest":{"get":{"tags":["Resources"],"summary":"Gợi ý phần mềm dựa trên phần mở rộng file","parameters":[{"in":"query","name":"filename","schema":{"type":"string"},"required":true,"description":"Tên file cần gợi ý phần mềm"},{"in":"query","name":"os","schema":{"type":"string","enum":["windows","mac","linux","web"]},"description":"Lọc theo hệ điều hành"}],"responses":{"200":{"description":"Danh sách phần mềm gợi ý","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Resource"}}}}}}}}}},"/api/resources/{id}":{"put":{"tags":["Resources"],"summary":"Cập nhật tài nguyên (Admin)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateResourceInput"}}}},"responses":{"200":{"description":"Đã cập nhật tài nguyên","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Resource"}}}}}}}},"delete":{"tags":["Resources"],"summary":"Xóa tài nguyên (Admin)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Đã xóa tài nguyên","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"}}}}}}}}},"/api/search":{"get":{"tags":["Search"],"summary":"Tìm kiếm nội dung theo từ khóa","parameters":[{"in":"query","name":"q","schema":{"type":"string"},"required":true,"description":"Từ khóa tìm kiếm"}],"responses":{"200":{"description":"Danh sách nội dung phù hợp","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Content"}}}}}}}}}},"/api/search/semantic":{"post":{"tags":["Search"],"summary":"Tìm kiếm nội dung bằng mô tả (AI sau này)","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["query"],"properties":{"query":{"type":"string","description":"Mô tả tìm kiếm"}}}}}},"responses":{"200":{"description":"Danh sách nội dung phù hợp","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Content"}}}}}}}}}},"/api/social/content/{contentId}/view":{"post":{"tags":["Social"],"summary":"Ghi nhận lượt xem nội dung","parameters":[{"in":"path","name":"contentId","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Thông tin bổ sung (tùy chọn)","content":{"application/json":{"schema":{"type":"object","properties":{"metadata":{"type":"object","description":"Thông tin bổ sung tùy chỉnh"}}}}}},"responses":{"201":{"description":"Đã ghi nhận lượt xem","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"}}}}}}}}},"/api/social/content/{contentId}/share":{"post":{"tags":["Social"],"summary":"Ghi nhận lượt chia sẻ nội dung","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"contentId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["platform"],"properties":{"platform":{"type":"string","description":"Nền tảng chia sẻ (facebook, twitter, etc.)"},"metadata":{"type":"object","description":"Thông tin bổ sung tùy chỉnh"}}}}}},"responses":{"201":{"description":"Đã ghi nhận lượt chia sẻ","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"}}}}}}}}},"/api/social/content/{contentId}/stats":{"get":{"tags":["Social"],"summary":"Lấy thống kê tương tác của nội dung","parameters":[{"in":"path","name":"contentId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Thống kê tương tác","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"$ref":"#/components/schemas/ContentStats"}}}}}}}}},"/api/social/popular":{"get":{"tags":["Social"],"summary":"Lấy danh sách nội dung phổ biến","parameters":[{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Số lượng kết quả trả về"},{"in":"query","name":"days","schema":{"type":"integer","default":30},"description":"Số ngày gần đây để thống kê"}],"responses":{"200":{"description":"Danh sách nội dung phổ biến","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"$ref":"#/components/schemas/PopularContent"}}}}}}}}}},"/api/auth/register":{"post":{"summary":"Bắt đầu quá trình đăng ký tài khoản mới (gửi OTP)","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","email","password"],"properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"Mã OTP đã được gửi đến email","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"email":{"type":"string"}}}}}}}},"400":{"description":"Email hoặc tên đăng nhập đã được sử dụng"},"500":{"description":"Lỗi khi gửi mã xác thực"}}}},"/api/auth/verify-registration":{"post":{"summary":"Xác thực OTP để kích hoạt tài khoản","description":"Sử dụng mã OTP đã gửi đến email để kích hoạt tài khoản","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","otp"],"properties":{"email":{"type":"string","format":"email","description":"Email đã đăng ký"},"otp":{"type":"string","description":"Mã OTP 6 chữ số đã gửi đến email"}}}}}},"responses":{"200":{"description":"Xác thực thành công, tài khoản đã được kích hoạt","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Xác thực tài khoản thành công"},"message_en":{"type":"string","example":"Account verification successful"},"status":{"type":"string","example":"success"},"responseData":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"accessToken":{"type":"string","description":"Access token để xác thực các request tiếp theo"},"refreshToken":{"type":"string","description":"Refresh token để lấy access token mới"},"expiresIn":{"type":"string","description":"Thời gian hết hạn của access token (giây)"},"ssid":{"type":"string","description":"Session ID"}}}}}}}},"400":{"description":"Thông tin không hợp lệ hoặc thiếu thông tin bắt buộc"},"401":{"description":"Mã OTP không hợp lệ hoặc đã hết hạn"},"404":{"description":"Không tìm thấy tài khoản chờ xác thực với email này"},"500":{"description":"Lỗi khi xác thực đăng ký"}}}},"/api/auth/resend-otp":{"post":{"summary":"Gửi lại mã OTP","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"email":{"type":"string"}}}}}},"responses":{"200":{"description":"Mã OTP mới đã được gửi","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"email":{"type":"string"}}}}}}}},"400":{"description":"Email đã được đăng ký"},"500":{"description":"Lỗi khi gửi lại mã OTP"}}}},"/api/auth/login":{"post":{"summary":"Đăng nhập","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"Đăng nhập thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}}}}}}},"401":{"description":"Thông tin đăng nhập không chính xác"},"500":{"description":"Lỗi khi đăng nhập"}}}},"/api/auth/refresh-token":{"post":{"summary":"Làm mới access token","tags":["Auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["refreshToken"],"properties":{"refreshToken":{"type":"string"}}}}}},"responses":{"200":{"description":"Làm mới token thành công","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}}}}}}},"400":{"description":"Thiếu refresh token"},"401":{"description":"Refresh token không hợp lệ hoặc đã hết hạn"},"404":{"description":"Người dùng không tồn tại"},"500":{"description":"Lỗi khi làm mới token"}}}},"/api/auth/me":{"get":{"summary":"Lấy thông tin người dùng hiện tại","tags":["Auth"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Thông tin người dùng","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/User"}}}}}},"401":{"description":"Chưa đăng nhập"},"500":{"description":"Lỗi khi lấy thông tin người dùng"}}}}}}